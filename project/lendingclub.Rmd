---
title: "Lending Club  case"
author: "Louis Luangkesorn"
date: "March 27, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(magrittr)
library(caret)
library(ggplot2)
library(GGally)
library(readr)
```

**Due Wednesday February 6, 2019**

1.  Using R, read in the data.  Note where you need to transform data and how you did this (e.g. declare it to be factor, ordered, normalize data, etc.). You may have to complete question 2 before you can completely answer this.
2.  Describe all of the fields in the data set. Note: you may group fields if it makes sense.
    i. Name
    ii. Short, one sentence description
    iii. Description of potential values (include data type and units)
    iv. mean, median, 25/75 quartiles, range if applicable
    vi. Is this an outcome or a potential predictor? (dependent or independent variable)
    
    
    
```
{r}
lendingclub <- read_csv("../data/accepted_2007_to_2018Q3.csv",
col_types = cols(delinq_2yrs = col_character(),
desc = col_skip(), earliest_cr_line = col_date(format = "%b-%Y"),
grade = col_factor(levels = c("G",
"F", "E", "D", "C", "B", "A")),
issue_d = col_date(format = "%b-%Y"),
loan_status = col_factor(levels = c("Current",
                                    "Fully Paid",
                                    "Charged Off",
                                    "Late (31-120 days)",
                                    "In Grace Period",
                                    "Late (16-30 days)",
                                    "Default")),
pub_rec_bankruptcies = col_character(),
settlement_amount = col_skip(), settlement_percentage = col_skip(),
settlement_term = col_skip(), term = col_factor(levels = c("36 months",
"60 months")), url = col_skip(), debt_settlement_flag_date = col_skip(), 
settlement_status  = col_skip(), settlement_date = col_skip() ))
save(lendingclub, file="lendingclub.Rdata")
```

```{r}
load("lendingclub.Rdata")
```
)

```{r}
lendingclubsample <- lendingclub[  , colSums(is.na(lendingclub)) < 100]
lendingclubsample <- lendingclubsample[,nearZeroVar(lendingclubsample),]

lendingclubsample2 <- sample_frac(lendingclubsample, size=0.01)
summary(lendingclubsample2)
save(lendingclubsample2, file="lendingclubsample2.RData")
```
```{r}
load("lendingclubsample2.RData")
```


```{r}
lendingclubplot <- lendingclubsample2 %>% 
  select(loan_amnt, funded_amnt, funded_amnt_inv, term, int_rate, grade, emp_length, home_ownership, annual_inc, installment)
ggpairs(lendingclubplot)
```

```{r}
trnctrl <- trainControl(method=cv, number=10)
```

```{r}
lassoFit1 <- train(x=)
```

